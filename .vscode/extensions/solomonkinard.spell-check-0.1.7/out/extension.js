"use strict";var N=Object.create;var y=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var J=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var B=(t,e)=>{for(var n in e)y(t,n,{get:e[n],enumerable:!0})},E=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of G(e))!L.call(t,i)&&i!==n&&y(t,i,{get:()=>e[i],enumerable:!(o=K(e,i))||o.enumerable});return t};var u=(t,e,n)=>(n=t!=null?N(J(t)):{},E(e||!t||!t.__esModule?y(n,"default",{value:t,enumerable:!0}):n,t)),Z=t=>E(y({},"__esModule",{value:!0}),t);var xe={};B(xe,{activate:()=>he});module.exports=Z(xe);var C=u(require("path")),z=u(require("fs")),s=u(require("vscode"));var S=u(require("fs")),A=u(require("zlib"));async function P(t,e){return new Promise((n,o)=>{let i=S.default.createReadStream(t),c=A.default.createGunzip(),r=[];i.pipe(c).on("data",a=>{r.push(a.toString())}),i.on("error",a=>(console.error("Error reading the file:",a),o())),c.on("error",a=>(console.error("Error during decompression:",a),o())),c.on("finish",()=>(e(r.join("")),n()))})}String.prototype.empty=function(){return this.length===0};var T=class t{constructor(e){this.addWord(e)}has(e){return this.getWord(e)?.isStop===!0}addWord(e){if(!e||e.empty())return;let n=this.addChar(e[0]);for(let o=1;o<e.length;o++){let i=e[o],c=n.getChar(i);c||(c=new t,n.map.set(i,c)),n=c}n.isStop=!0}addChar(e){let n=this.map.get(e);return n||(n=new t,this.map.set(e,n),n)}getChar(e){return this.map.get(e)}getWord(e){if(!e||e.empty())return;let n=this.getChar(e[0]);for(let o=1;o<e.length;o++){if(!n)return;n=n?.getChar(e[o])}return n}removeWord(e){if(e.empty()||!this.has(e.toString()))return;let n=this,o=n;for(let i=0;i<e.length;i++){let c=e[i],r=n.getChar(c);if(!r)return;if(r.map.size===0){n.map.delete(c);return}o=n,n=r}if(n.map.size===0){o.map.delete(e[e.length-1]);return}n.isStop=void 0}isStop;map=new Map};var f=class{call(e,n){this.clear(),this.idleTimer=setTimeout(e,n)}clear(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=void 0)}idleTimer};function W(t){return t.matchAll(/(?:^|\s)([a-z]+)(?=(?:[.,](?!\S)|\s|$))/gm)}var R=u(require("vscode"));function _(t){return R.extensions.getExtension(t.extension.id)?.id??"undefined"}var v=class{constructor(e,n){this.context_=e,this.key_=`${_(e)}.${n}`;let o=this.context_.workspaceState.get(this.key_);typeof o!="string"&&(o="{}");let i;try{i=JSON.parse(o)}catch{i="{}"}this.map_=new Map(Object.entries(i)),this.update()}async visit(e){this.delete(e),this.map_.set(e,Date.now()),await this.update()}async update(){let e=JSON.stringify(Object.fromEntries(this.map_));await this.context_.workspaceState.update(this.key_,e)}async delete(e){this.map_.delete(e),await this.update()}keys(){return[...this.map_.keys()].reverse()}context_;key_;map_};function V(t){let e=[...t.map.entries()].map(([n,o])=>`${n}:${o._id}`).sort();return`${t.isStop?"1":"0"}|${e.join(",")}`}function U(t){let e=0,n=new Map;function o(i){for(let[a,m]of i.map){let d=o(m);i.map.set(a,d)}let c=V(i),r=n.get(c);return r!==void 0?r:(i._id=e++,n.set(c,i),i)}return o(t)}var g=u(require("vscode"));function I(t){let e=t.document,n=t.selection,o=e.getText(n);if(o)return o;let i=/[A-Za-z_0-9]+/,c=e.getWordRangeAtPosition(n.start,i);return c===void 0?void 0:e.getText(c)}var X=1*1e3,Y=10*60*1e3,p,ee=new f,te=s.languages.createDiagnosticCollection("spell-check"),M=20250502211814,ne=new Map([["teh","the"],["onw","one"],["adn","and"],["tpye","type"],["fro","for"],["thier","their"],["recieve","receive"],["shcool","school"],["pubic","public"],["accomodate","accommodate"],["seperate","separate"],["definately","definitely"],["occured","occurred"],["tommorrow","tomorrow"],["noticable","noticeable"],["wierd","weird"],["anohter","another"],["paly","play"],["thsi","this"],["wtih","with"],["abotu","about"],["alwasy","always"],["becuase","because"],["calender","calendar"],["diferent","different"],["enviroment","environment"],["freind","friend"],["goverment","government"],["happend","happened"],["imediately","immediately"],["knowlege","knowledge"],["lenght","length"],["mispell","misspell"],["neccessary","necessary"],["oppurtunity","opportunity"],["persistant","persistent"],["reccomend","recommend"],["sucess","success"],["untill","until"],["writting","writing"],["accross","across"],["agrument","argument"],["alot","allot"],["apperance","appearance"],["articel","article"],["avaliable","available"],["baloon","balloon"],["begining","beginning"],["beleive","believe"],["buisness","business"],["catagory","category"],["comming","coming"],["compeltely","completely"],["concieve","conceive"],["consistant","consistent"],["controll","control"],["curiousity","curiosity"],["decribe","describe"],["disapear","disappear"],["dissapoint","disappoint"],["embarass","embarrass"],["equippment","equipment"],["existance","existence"],["experiance","experience"],["foriegn","foreign"],["foward","forward"],["generaly","generally"],["gratefull","grateful"],["guidence","guidance"],["harrass","harass"],["independance","independence"],["interupt","interrupt"],["judgement","judgment"],["knowledgable","knowledgeable"],["libary","library"],["maintanance","maintenance"],["managment","management"],["millenium","millennium"],["occassion","occasion"],["prefered","preferred"],["pronounciation","pronunciation"],["reciept","receipt"],["referance","reference"],["relevent","relevant"],["responce","response"],["schedual","schedule"],["sence","sense"],["suprise","surprise"],["temporarly","temporarily"],["acheive","achieve"],["adress","address"],["agressive","aggressive"],["apparant","apparent"],["appriciate","appreciate"],["arange","arrange"],["assigment","assignment"],["attatch","attach"],["benifit","benefit"],["caluclate","calculate"],["certian","certain"],["colledge","college"],["committ","commit"],["comparsion","comparison"],["competative","competitive"],["congradulations","congratulations"],["convienient","convenient"],["critisize","criticize"],["develope","develop"],["dificult","difficult"],["disscuss","discuss"],["effecient","efficient"],["enrolll","enroll"],["especialy","especially"],["essencial","essential"],["exaggerate","exaggerate"],["facilty","facility"],["familar","familiar"],["finaly","finally"],["flourescent","fluorescent"],["frequant","frequent"],["guarentee","guarantee"],["hieght","height"],["immedietly","immediately"],["inadvertant","inadvertent"],["inconvience","inconvenience"],["intrest","interest"],["irrelevent","irrelevant"],["liason","liaison"],["lisence","license"],["neigbor","neighbor"],["permenant","permanent"],["privelege","privilege"],["proffessional","professional"],["reccommend","recommend"],["remeber","remember"],["seperately","separately"],["similiar","similar"],["succesful","successful"],["transfered","transferred"],["registerd","registered"],["disptach","dispatch"],["possiblity","possibility"],["additonal","additional"],["representa","represents"],["bitmaks","bitmask"],["canddiate","candidate"]]),b=class{provideCodeActions(e,n,o,i){let c=[];for(let r of o.diagnostics)if(r.code===M){let a=ne.get(r.typo);if(a){let d=new s.CodeAction(`Spell Check: Change to '${a}'`,s.CodeActionKind.QuickFix);d.diagnostics=[r],d.edit=new s.WorkspaceEdit,d.edit.replace(e.uri,r.range,a),c.push(d)}let m=new s.CodeAction("Spell Check: Add to my dictionary",s.CodeActionKind.QuickFix);m.diagnostics=[r],m.command={title:"Add to my dictionary",command:"spell-check.commands.addToUserDictionaryImpl",arguments:[r.typo]},c.push(m)}return c}resolveCodeAction(e,n){}};function ie(t){p=void 0,D(t)}function D(t){t&&h(t.document.getText(),x)}async function oe(){if(ee.call(()=>p=void 0,Y),p){l.keys().forEach(i=>p.addWord(i));return}let t=new T,e=i=>{let c=i.split(/\n/);for(let r of c)t.addWord(r)},o=await(async i=>(await z.promises.readdir(i)).filter(r=>r.endsWith(".dict.gz")))(k);for(let i of o){let c=C.default.join(k,i);await P(c,e)}l.keys().forEach(i=>t.addWord(i)),w.keys().forEach(i=>t.removeWord(i)),U(t),p=t}var k,se=new f;function F(t){let e=W(t),n=[];for(let o of e){let i=o[1];p?.has(i)||n.push(o)}return n}function h(t,e){se.call(async()=>{await oe();let n=F(t);e(n)},X)}function x(t){let e=s.window.activeTextEditor;if(!e)return;let n=[],o=s.DiagnosticSeverity.Warning,i="Spell Check",c=M;t.forEach(r=>{let a=r[1],m=(r.index??0)+r.indexOf(a),d=e.document.positionAt(m),j=d.with({character:d.character+a.length}),Q=new s.Range(d,j),q=`${i} '${a}'`;n.push({range:Q,message:q,severity:o,typo:a,code:c})}),te.set(e.document.uri,n)}function re(t){let e=t.uri.scheme!=="git"?t.uri.fsPath:JSON.parse(t.uri.query).path,n=s.window.activeTextEditor;!n||n.document.uri.fsPath!=e||h(n.document.getText(),x)}function ce(t){t&&h(t.document.getText(),x)}function ae(t){h(t.document.getText(),x)}function $(t){let e="Spell Check: Dictionary: Add or Remove",n,o=s.window.activeTextEditor;o&&o.selection&&(n=I(o)),s.window.showInputBox({title:e,value:n}).then(i=>{i===void 0||i.empty()||!/^[a-z]+$/.test(i)||(t(i),D(s.window.activeTextEditor))})}function de(t){l.visit(t),D(s.window.activeTextEditor)}function le(){$(t=>l.visit(t))}function me(){p=void 0,$(e=>{l.delete(e),w.visit(e)})}function ue(){s.workspace.openTextDocument({content:l.keys().join(`
`),language:"plaintext"}).then(t=>s.window.showTextDocument(t))}function pe(t){let e=t.document.getText(),n=new RegExp(/^[a-z]+$/gm),o=e.matchAll(n);for(let[i]of o)l.visit(i);h(e,x)}var l,w;function ge(t){let e=F(t.document.getText()).map(n=>({label:n[1]}));s.window.showQuickPick(e)}function O(t,e,n){let o=s.window.createQuickPick();o.show(),o.title=t;let i=[];((r,a)=>{i.push({iconPath:r,tooltip:a})})(new s.ThemeIcon("close"),"Remove"),o.items=e.keys().map(r=>({label:r,buttons:i})),o.onDidTriggerItemButton(async r=>{switch(r.button.tooltip){case"Remove":{await e.delete(r.item.label),o.items=e.keys().map(a=>({label:a,buttons:i})),ie(n);break}}})}async function fe(t){O("Spell Check: List custom words",l,t)}async function ve(t){O("Spell Check: List forgotten words",w,t)}function he(t){w=new v(t,"userDefinedRemoveWords"),l=new v(t,"userDefinedWords"),k=C.default.join(t.extensionPath,"public","out","data"),t.subscriptions.push(s.workspace.onDidOpenTextDocument(re),s.window.onDidChangeActiveTextEditor(ce),s.workspace.onDidChangeTextDocument(ae),s.commands.registerCommand("spell-check.addToUserDictionary",le),s.commands.registerCommand("spell-check.removeFromUserDictionary",me),s.commands.registerCommand("spell-check.exportUserDictionary",ue),s.commands.registerCommand("spell-check.commands.addToUserDictionaryImpl",de),s.commands.registerTextEditorCommand("spell-check.importUserDictionary",pe),s.commands.registerTextEditorCommand("spell-check.commands.listUnknownWords",ge),s.commands.registerTextEditorCommand("spell-check.commands.listForgottenWords",ve),s.commands.registerTextEditorCommand("spell-check.commands.listCustomWords",fe),s.languages.registerCodeActionsProvider("*",new b,{providedCodeActionKinds:[s.CodeActionKind.QuickFix]}))}0&&(module.exports={activate});
